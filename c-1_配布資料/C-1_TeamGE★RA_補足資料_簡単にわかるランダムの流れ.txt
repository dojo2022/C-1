簡単にわかるランダムの流れ

➀テーブルにある日付のデータを用いて、直近２日間に行われたイベントのデータを取得する

➁➀で取得したデータを除いて、ランダムで表示される可能性のあるデータの数を取得する

➂➁で得た数を上限にランダム数を作る

➃➀のデータを除いたイベントのデータから➂で作ったランダム数の行のイベントデータを取得する

➄➂、➃を取得したいイベントデータの数に合わせて繰り返す